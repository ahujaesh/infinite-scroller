<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TikTok Style Infinite Scroller">
    <meta name="keywords" content="TikTok, infinite scroller, web development">
    <meta name="author" content="Eshaan Ahuja">
    <link rel="icon" href="favicon.png" type="image/x-icon">
    
    <title>TikTok Style Infinite Scroller</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      .sentinel {
        height: 20px;
        background-color: transparent;
      }

      .item {
        border: 1px solid #ccc;
        padding: 20px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div id="content">
          <div class="item">Item 1</div>
          <div class="item">Item 2</div>
          <div class="item">Item 3</div>
          <div class="item">Item 4</div>
          <div class="item">Item 5</div>
          <div class="item">Item 6</div>
          <div class="item">Item 7</div>
          <div class="item">Item 8</div>
          <div class="item">Item 9</div>
          <div class="item">Item 10</div>
          <div class="sentinel"></div>
      </div>
      <script>
         const content = document.getElementById("content");
          const sentinel = document.querySelector(".sentinel");
          const options = {
              root: null,
              rootMargin: "0px",
              threshold: 0.8, // Trigger when the sentinel is 80% visible
          };
  
          function handleIntersection(entries, observer) {
              entries.forEach((entry) => {
              if (entry.isIntersecting) {
                  setTimeout(loadMoreItems, 500); // mimic async call
              }
              });
          }
  
          function addElements(min, max){
              for (let i = min; i <= max; i++) {
                  const newItem = document.createElement("div");
                  newItem.classList.add("item");
                  newItem.textContent = "Item " + i;
                  content.appendChild(newItem);
              }
          }
          function loadMoreItems() {
              // Simulate loading more items
              const len = content.children.length;
              content.removeChild(sentinel); // remove from current position
              addElements(len, len+5)
              content.appendChild(sentinel); // add before last 4 elements
              addElements(len+6, len+10)
          }
  
        const observer = new IntersectionObserver(handleIntersection, options);
        observer.observe(sentinel);
      </script>
  </body>
</html>
